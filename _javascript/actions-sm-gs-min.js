$(document).ready(function(){function e(e){o=[],e.forEach(function(e,t){if("function"==typeof e){var e=e();o.push(e)}})}var t=[],o=[],a=[],n=[],i=[],r=[],s=[],c=[],l=$("body > header:first-of-type"),d=$("nav.sub-nav"),u=$("#MainHeader"),m=$("#MainHeader .image-cont"),p=[],g=m.height()*m.length,h=$("#HatsDisplay"),w=$("#SweatsDisplay"),f=$("#GalleryImgs"),T=f.height(),v=h.find(".product"),x=w.find(".product"),M=$("#ImgGrid1 [class*=col-]"),y=$("#ImgGrid2 [class*=col-]"),b=$("#ImgGrid3 [class*=col-]"),k=u.find(".slider"),S=$(".product"),P=$("#Logo"),I=$("#Slider .slider"),H={curImg:0},N={curProd:0,it:0,mouse:$(window).scrollTop()},w={curProd:0,it:0,mouse:$(window).scrollTop()},z=50,G=null,F=function(e){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ipad|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera);if(S.each(function(e){var t=$(this).find(".sub-product");t.length>1&&$(this).flexslider({animation:"slide",selector:".prod-cont > .sub-product",controlNav:!0,slideshow:!1,itemWidth:"100%"})}),I.each(function(e){var t=$(this).find("li");t.length>1&&$(this).flexslider({animation:"fade",selector:"li",controlNav:!0,slideshow:!0,itemWidth:"100%"})}),m.each(function(e){p.push($(this).find("img").attr("src"))}),0==F){var D=new ScrollMagic.Controller({refreshInterval:1});a.push(TweenMax.to(H,.5,{curImg:p.length-1,roundProps:"curImg",repeat:0,immediateRender:!0,ease:Linear.easeNone,onUpdate:function(){var e=$("#MainHeader .view-1");e.find("img").attr("src",p[H.curImg]),H.curImg>=1?TweenMax.to(k,.3,{x:"100%"}):TweenMax.to(k,.3,{x:"0%"}),H.curImg>=3?TweenMax.to(P,.1,{opacity:0}):TweenMax.to(P,.1,{opacity:1}),e.data("current",H.curImg+1),e.attr("data-current",H.curImg+1);var t=$(".view-"+(H.curImg+1)).find(".feat-cont");if(t.length>0){var o=$(t).clone(!0);0==e.find(".feat-cont").length&&o.appendTo(e)}else{var a=e.find(".feat-cont");a.remove()}}})),a.push(TweenMax.staggerFromTo(u,.3,{"background-position":"0 0"},{"background-position":"100% 100%"}));for(var E=0;E<M.length;E++){var C=0!=$(M[E]).find(".border-cont [class*=border-]").length&&$(M[E]).find(".border-cont [class*=border-]"),j=$(M[E]).data("scroll");if(n.push(TweenMax.staggerFromTo($(M[E]),3,{y:0},{y:-j,ease:Back.easeOut},.1)),0!=C)for(var q=0;q<C.length;q++)q%2==0?n.push(TweenMax.staggerFromTo($(C[q]),3,{width:0},{width:"100%"})):n.push(TweenMax.staggerFromTo($(C[q]),3,{height:0},{height:"100%"}))}i.push(TweenMax.to(N,5e-5,{curProd:v.length-1,roundProps:"curProd",repeat:0,immediateRender:!0,ease:Linear.easeNone,onUpdate:function(){var e=v[N.curProd],t=v[N.it],o=$(e).find(".col-9"),a=$(e).find(".col-3"),n=$(t).find(".col-9"),i=$(t).find(".col-3"),r=$(t).data("color"),s=$(e).data("color"),c=$("li.prev-color"),l=$("li.color"),d=N.mouse;N.mouse=$(window).scrollTop(),N.mouse>d?N.it<N.curProd&&TweenMax.to(t,5e-13,{opacity:0,onStart:function(){TweenMax.set(e,{display:"block"})},onComplete:function(){TweenMax.set(t,{display:"none"}),TweenMax.set(t,{className:"-=active"}),TweenMax.set(e,{className:"+=active"}),TweenMax.to(e,5e-13,{opacity:1}),l.attr("data-color",s)}}):N.mouse<d&&N.it<N.curProd&&TweenMax.to(e,5e-13,{opacity:0,onStart:function(){TweenMax.set(t,{display:"block"})},onComplete:function(){TweenMax.set(e,{display:"none"}),TweenMax.set(e,{className:"-=active"}),TweenMax.set(t,{className:"+=active"}),TweenMax.to(t,5e-13,{opacity:1}),TweenMax.set(t,{className:"+=active"}),l.attr("data-color",s)}}),N.it=0==N.curProd?0:N.curProd-1}}));for(var E=0;E<y.length;E++){var C=0!=$(y[E]).find(".border-cont [class*=border-]").length&&$(y[E]).find(".border-cont [class*=border-]"),j=$(y[E]).data("scroll");if(r.push(TweenMax.staggerFromTo($(y[E]),3,{y:0},{y:-j,ease:Back.easeOut},.1)),0!=C)for(var q=0;q<C.length;q++)q%2==0?r.push(TweenMax.staggerFromTo($(C[q]),3,{width:0},{width:"100%"})):r.push(TweenMax.staggerFromTo($(C[q]),3,{height:0},{height:"100%"}))}for(var E=0;E<b.length;E++){var C=0!=$(b[E]).find(".border-cont [class*=border-]").length&&$(b[E]).find(".border-cont [class*=border-]"),j=$(b[E]).data("scroll");if(c.push(TweenMax.staggerFromTo($(b[E]),3,{y:0},{y:-j,ease:Back.easeOut},.1)),0!=C)for(var q=0;q<C.length;q++)q%2==0?c.push(TweenMax.staggerFromTo($(C[q]),3,{width:0},{width:"100%"})):c.push(TweenMax.staggerFromTo($(C[q]),3,{height:0},{height:"100%"}))}s.push(TweenMax.to(w,5e-5,{curProd:x.length-1,roundProps:"curProd",repeat:0,immediateRender:!0,ease:Linear.easeNone,onUpdate:function(){var e=x[w.curProd],t=x[w.it],o=$(e).find(".col-9"),a=$(e).find(".col-3"),n=$(t).find(".col-9"),i=$(t).find(".col-3"),r=$(t).data("color"),s=$(e).data("color"),c=$("li.prev-color"),l=$("li.color"),d=w.mouse;w.mouse=$(window).scrollTop(),w.mouse>d?w.it<w.curProd&&TweenMax.to(t,5e-13,{opacity:0,onStart:function(){TweenMax.set(e,{display:"block"})},onComplete:function(){TweenMax.set(t,{display:"none"}),TweenMax.set(t,{className:"-=active"}),TweenMax.set(e,{className:"+=active"}),TweenMax.to(e,5e-13,{opacity:1}),l.attr("data-color",s)}}):w.mouse<d&&w.it<w.curProd&&TweenMax.to(e,5e-13,{opacity:0,onStart:function(){TweenMax.set(t,{display:"block"})},onComplete:function(){TweenMax.set(e,{display:"none"}),TweenMax.set(e,{className:"-=active"}),TweenMax.set(t,{className:"+=active"}),TweenMax.to(t,5e-13,{opacity:1}),TweenMax.set(t,{className:"+=active"}),l.attr("data-color",s)}}),w.it=0==w.curProd?0:w.curProd-1}})),t.push(function(){return new ScrollMagic.Scene({triggerElement:"#MainHeader",offset:T/2,duration:function(){return T*m.length/6}}).setTween(a).setPin("#MainHeader").addTo(D)}),t.push(function(){if(0==F)return new ScrollMagic.Scene({triggerElement:"#ImgGrid1",duration:function(){return $("#ImgGrid1").outerHeight()}}).setTween(n).addTo(D)}),t.push(function(){if(0==F)return new ScrollMagic.Scene({triggerElement:"#HatsDisplay",triggerHook:0,offset:0,duration:function(){return $("#HatsDisplay").height()*v.length}}).setTween(i).setPin("#HatsDisplay").addTo(D)}),t.push(function(){if(0==F)return new ScrollMagic.Scene({triggerElement:"#ImgGrid2",duration:function(){return $("#ImgGrid2").outerHeight()}}).setTween(r).addTo(D)}),t.push(function(){if(0==F)return new ScrollMagic.Scene({triggerElement:"#SweatsDisplay",triggerHook:0,offset:0,duration:function(){return $("#SweatsDisplay").height()*x.length}}).setTween(s).setPin("#SweatsDisplay").addTo(D)}),t.push(function(){if(0==F)return new ScrollMagic.Scene({triggerElement:"#ImgGrid3",duration:function(){return $("#ImgGrid3").outerHeight()}}).setTween(c).addTo(D)}),e(t),$(window).on("resize",function(){G&&clearTimeout(G),G=setTimeout(function(){o.forEach(function(e,t){e&&e.destroy(!0)}),e(t)},z)})}else if(1==F){var L=$("#GalleryImgs");TweenMax.set(l,{y:-l.outerHeight()}),L.flexslider({animation:"fade",selector:".image-cont",controlNav:!1,directionNav:!1,slideshow:!0,itemWidth:"100%",animationSpeed:1,slideshowSpeed:100,pauseOnAction:!0,touch:!0,start:function(e){e.addClass("hide-data")},after:function(e){e.currentSlide+1==e.count&&(e.pause(),e.removeClass("hide-data"),TweenMax.to(l,.3,{y:0}))}})}var O=0;$(window).on("scroll",function(){var e=$(window).scrollTop(),t=l.outerHeight();e>t&&0==F?(l.css({position:"relative"}),l.css({top:-l.outerHeight()}),d.css({top:0}),e<O&&(l.css({position:"fixed"}),l.css({top:0}),d.css({top:l.outerHeight()}))):e<=t&&0==F?(l.css({position:"fixed"}),d.css({top:l.outerHeight()})):e>t&&1==F?TweenMax.to(l,.3,{y:-l.outerHeight()}):e<=t&&1==F&&TweenMax.to(l,.3,{y:0}),O=e}),$("a[href*=\\#]:not([href=\\#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html,body").animate({scrollTop:e.offset().top-100},1e3),!1}})});